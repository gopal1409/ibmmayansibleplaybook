---
  - 
   hosts: client
   tasks:
     - name: verfiy app/database are running or not. 
       shell: if ps -eaf| egrep 'httpd'| grep -v grep > /dev/null; then echo 'process_running'; else echo 'process_not_running'; fi
       ignore_errors: true
       register: appr_proc_check
     - debug: msg='{{ appr_proc_check }}'
     - name: descision point the patch should be applied or not 
       fail:
         msg="{{ inventory_hostname }} have running application, please stop first then pathcing"
       when: appr_proc_check.stdout == "process_running"
     - name: current kernal version
       shell: uname -r
       register: curr_ker